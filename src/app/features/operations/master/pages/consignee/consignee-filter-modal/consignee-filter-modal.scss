// Advanced Filter Modal Modern Styling

$overlay-bg: rgba(17,25,40,0.55);
$panel-bg: #ffffff;
$border: #d9dee3;
$accent: var(--color-card);
$radius: 16px;
$transition: .25s cubic-bezier(.4,0,.2,1);

.advanced-filter-overlay {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 6vh 1.25rem 2rem;
  background: $overlay-bg;
  -webkit-backdrop-filter: blur(6px);
  backdrop-filter: blur(6px);
  z-index: 2200;
  animation: afFadeIn .3s ease;
}

.advanced-filter {
  width: min(950px,100%);
  max-height: 88vh;
  background: $panel-bg;
  border: 1px solid $border;
  border-radius: $radius;
  display: flex;
  flex-direction: column;
  box-shadow: 0 10px 30px -8px rgba(0,0,0,.25), 0 4px 14px -4px rgba(0,0,0,.18);
  animation: slideDown .4s $transition;
  overflow: hidden;
}

.af-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1rem 1.25rem .9rem 1.25rem;
  border-bottom: 1px solid $border;
  background: linear-gradient(135deg, #f8fafc 0%, #eef2f6 100%);
  position: sticky; top:0; z-index: 10;

  .title { font-weight:600; font-size:.95rem; letter-spacing:.4px; color:#0f172a; }
  .header-actions { display:flex; gap:.5rem; }
}

.icon-btn { width:34px; height:34px; border:1px solid $border; background:#fff; border-radius:10px; display:flex; align-items:center; justify-content:center; cursor:pointer; font-size:.8rem; color:#475569; transition:$transition; }
.icon-btn:hover { background:$accent; color:#fff; border-color:$accent; box-shadow:0 4px 10px -2px rgba(0,0,0,.2); }
.icon-btn.close { background:#fff5f5; }
.icon-btn.close:hover { background:#dc2626; border-color:#dc2626; }
.icon-btn.refresh { background:#f1f5f9; }
.icon-btn.refresh:hover { background:#2563eb; border-color:#2563eb; }
.icon-btn.ghost { background:#f8fafc; }

.af-body { padding: 1rem 1.25rem 1.25rem; overflow-y:auto; overscroll-behavior: contain; }
.af-body::-webkit-scrollbar { width:8px; }
.af-body::-webkit-scrollbar-thumb { background:#c6ced6; border-radius:4px; }
.af-body::-webkit-scrollbar-thumb:hover { background:#aab4be; }

.field-block { margin-bottom:1rem; }
.block-label { display:block; font-size:.7rem; text-transform:uppercase; letter-spacing:.05em; font-weight:600; color:#64748b; margin-bottom:.35rem; }

.criteria-row { display:flex; gap:.5rem; align-items:center; flex-wrap:wrap; margin-bottom:1rem; }
.criteria-row select, .criteria-row input { flex:1 1 140px; }

.divider { margin: 1rem 0 1.1rem; border-top:1px solid $border; }

.columns-section { margin-bottom: .5rem; }
.columns-grid { display:grid; grid-template-columns: repeat(auto-fill,minmax(150px,1fr)); gap:.35rem .75rem; max-height:240px; overflow:auto; padding:.25rem .25rem .25rem 0; }
.columns-grid::-webkit-scrollbar { width:6px; }
.columns-grid::-webkit-scrollbar-thumb { background:#ced4da; border-radius:3px; }

.chk-item { display:flex; align-items:center; gap:.45rem; font-size:.7rem; background:#f8fafc; padding:.35rem .55rem; border:1px solid #e2e8f0; border-radius:8px; cursor:pointer; transition:$transition; -webkit-user-select:none; user-select:none; }
.chk-item:hover { background:#fff; border-color:#cbd5e1; }
.chk-item input { width:14px; height:14px; margin:0; accent-color:$accent; }
.chk-item span { flex:1; }

.af-footer { display:flex; justify-content:space-between; align-items:center; padding:.85rem 1.1rem; border-top:1px solid $border; background:#f8fafc; gap:.75rem; flex-wrap:wrap; }
.af-footer .left-actions, .af-footer .right-actions { display:flex; gap:.55rem; }

.btn-soft { border:none; display:inline-flex; align-items:center; gap:.4rem; font-size:.72rem; font-weight:600; letter-spacing:.4px; padding:.55rem .85rem; border-radius:10px; cursor:pointer; background:#e2e8f0; color:#1e293b; position:relative; overflow:hidden; transition:$transition; }
.btn-soft.primary { background:linear-gradient(135deg,#2563eb,#1d4ed8); color:#fff; }
.btn-soft.secondary { background:#f1f5f9; color:#0f172a; }
.btn-soft.danger { background:#ffe4e6; color:#be123c; }
.btn-soft:hover { transform:translateY(-2px); box-shadow:0 6px 18px -6px rgba(0,0,0,.25); }
.btn-soft:active { transform:translateY(0) scale(.95); }
.btn-soft.primary:hover { box-shadow:0 6px 18px -6px rgba(37,99,235,.6); }
.btn-soft.danger:hover { background:#dc2626; color:#fff; }

@media (max-width: 640px) {
  .advanced-filter { width:100%; }
  .criteria-row { flex-direction:column; align-items:stretch; }
  .criteria-row select, .criteria-row input { flex:1 1 auto; width:100%; }
  .columns-grid { max-height:200px; }
}

@keyframes afFadeIn { from { opacity:0; } to { opacity:1; } }
@keyframes slideDown { 0% { transform:translateY(-12px); opacity:0; } 60% { opacity:1; } 100% { transform:translateY(0); opacity:1; } }
